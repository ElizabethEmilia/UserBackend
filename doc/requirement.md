# 客户需求

## 基本概况
 **按照客户提供的网站模板进行仿制。**
 
## 模块划分

* 账号信息：查看/修改账号资料，充值（微信、支付宝、对公充值）
* 公司情况：公司信息查看，公司设立进度，公司联系人（*额外的联系人添加到账号资料中）
* 开票服务：开票申请、开票统计
* 税金管理：（暂时作为遗留问题，客户弄清楚以后再实现）年销售额范围管理、税金账户管理
* 用户管理：客户管理，管理员管理，权限管理

### 账号信息模块

* 在左侧导航栏上只有5个基础的模块名称，模板上对应的子项目在我们的项目上直接由上至下**紧密排列**。
* 该项目不同于模板的项目，公司只有一级公司，也就是说，那些选择公司的下拉列表只有一列，而不是像模板那样分级的，但是再设计数据库时（未雨绸缪地防止客户改需求），在数据库里面同样有公司的父公司的自返关联。

**1. 总览页面**

作为默认页面，在用户登录时即展示。包含基本资料的查看和修改，公司情况以及购买产品的情况，余额以及产品订单。

总览页面包含的内容包括下图所示的内容。


**2. 基本资料**

该页面提供基本资料的修改。

地址需要用到多级联动的地址数据库。行业使用模板现成的。

**注意**：在该页面的基础上，需要加上“其他联系人电话”一栏。，以替代“公司联系人”的功能。


**3. 修改密码**

没啥好说的  修改密码的功能

**4. 在线充值**

支持指定金额的微信和支付宝付款。需要申请API Key，使用商家账号。在用户扫码创建订单完成以后加入充值记录，若成功，修改状态为成功，否则失败。

（需要测试各种情况，确保充值成功）


**5. 对公充值**

由用户提出申请（添加一条记录），后台人员审核并同意充值并将充值后的余额加入到用户余额中。

对公充值支持线下支付宝，微信，银行转账。

**6. 充值明细**

需要提供对充值记录的查询和筛选，按照公司充值日期间隔等，支付方式，进行查询。、

## 公司管理

**1. 公司设立进度**

（对于客户界面）可以查看进度信息

|时间|状态|备注|
|---|---|---|
|2018/8/29|开始申请||
|...|...|...|

（对于管理员界面）可以添加、修改、删除进度信息

**2. 公司证照**

|序号|证照编号|证照名称|操作|
|---|---|---|---|
|1|1223444444444444|营业执照|[打印](#)|
|...|...|...|...|

【打印】可打开图片进行打印。

管理端界面，和客户界面分离（这是完全不一样的两套系统），管理端可以增删改，同样根据客户信息来筛选。

**3. 公司联系人**

这个一块内容移到1.1节。

### 开票模块

**1. 开票申请**

开票分为自开票和代开票，自开票是普通增值税发票，代开票是需要去税务局办理的增值税专用发票。

对于一个用户有4种权限，由管理员在后台设置（是用户信息的一部分）

|权限(二进制)|普通发票|专用发票|
|---|---|---|
|00|No|No|
|01|No|Yes|
|10|Yes|No|
|11|Yes|Yes|

如果上述权限表示某个用户不可以开某一类发票，那么弹框提示不能开此类发票。

开发票需要在报税频率完善以后方可开票。（报税频率是公司的一个属性吗，说明见下节）

用户可以查询历史开票记录，可以新增开票，以及删除和导出开票记录。

申请开票的状态包括：未提交、待审核、未通过、通过（可使用状态机完成）

**2. 开票统计**

开票统计默认由系统自动统计，【但是】，管理员可以对其进行编辑，若有编辑，那么显示管理员编辑以后的信息，并且记录原自动统计的信息（要有修改记录）。

【注】关于“连续12个月收入的含义”：自公司首笔交易发生时间开始算起（非首笔开票时间）一年间的所有开票数据收入统计。
这个数据由管理后台确认（，需要用户提出首笔交易信息提交管理员核实？），确认后，该日期仅对管理员显示，不对客户显示。

### 税金管理

**1. 年销售额范围**

这个用于估计用户需要预交多少钱。

具体查询参照模板。

>该页面是为了满足客户在不同销售额情况下的税金预交管理需求，详细规则如下：
>
>一档（3%）：适用于月销售额小于等于3万或季销售额小于等于9万，没有开具增值税专用发票需求的客户。
>
>二档（6%）：适用于预计年销售额大于36万且小于等于100万，或预计年销售额小于等于36万但月销售额大于3万或季度销售额大于9万的客户。
>
>三档（7%）：适用于预计年销售额大于100万且小于等于200万，大于200万且小于等于300万，大于300万且小于等于400万或大于400万且小于等于450万的客户。

可以进行的操作：
年销售额范围预选  年销售额范围变更  税金预交差额补交  撤回变更

* 年销售额范围预选：对于待预选状态的公司，可以选择以上3个大档位。
* 年销售额范围变更年销售额范围变更：对于已经选择状态的公司，可以再若干个小档位中选择。
* 补交税金（待定）
* 撤回变更（待定）

注意：同一个公司只能有一个档位。

历史记录就是再显示一遍这个信息。

**2. 税金账户管理**

待定

### 管理员管理（仅限超级管理员权限）

可以进行管理员的添加删除。

### 客户管理（仅限管理员权限）

可以进行客户的添加和删除。

### 操作日志（仅限超级管理员权限）

记录管理员的每一个操作，例如

`Miyuki 在 2018年8月29日20点35分 写了需求分析文档`

